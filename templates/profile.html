<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ user.username }}'s Profile â€“ StackIt</title>
    <link rel="stylesheet" href="/static/style.css" />
    <style>
      .profile-container {
        max-width: 800px;
        margin: 2rem auto;
        animation: fadeIn 0.6s ease-out;
      }

      .profile-header {
        background: var(--surface);
        border-radius: 1.5rem;
        padding: 2.5rem;
        display: flex;
        gap: 2rem;
        align-items: center;
        margin-bottom: 2rem;
        border: 1px solid var(--border);
        box-shadow: 0 20px 25px -5px var(--shadow);
      }

      .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 1rem;
        object-fit: cover;
        border: 2px solid var(--border);
      }

      .profile-info h1 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        background: linear-gradient(135deg, var(--text) 0%, var(--accent) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }

      .profile-rep {
        color: var(--accent);
        font-size: 1.1rem;
      }

      .profile-bio {
        color: var(--text-secondary);
        margin: 1rem 0;
        font-size: 1.1rem;
      }

      .edit-profile-btn {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: var(--text);
        text-decoration: none;
        border-radius: 0.75rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .edit-profile-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3);
      }

      .profile-section {
        background: var(--surface);
        border-radius: 1rem;
        padding: 2rem;
        margin-bottom: 2rem;
        border: 1px solid var(--border);
      }

      .profile-section h2 {
        color: var(--text);
        font-size: 1.5rem;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--border);
      }

      .profile-list {
        list-style: none;
      }

      .profile-list li {
        padding: 1rem;
        border-radius: 0.5rem;
        margin-bottom: 0.5rem;
        background: var(--surface-light);
        transition: all 0.2s ease;
      }

      .profile-list li:hover {
        transform: translateX(5px);
        background: var(--surface);
      }

      .profile-list a {
        color: var(--text);
        text-decoration: none;
      }

      .profile-list a:hover {
        color: var(--accent);
      }

      .profile-date {
        color: var(--text-secondary);
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .profile-header {
          flex-direction: column;
          text-align: center;
          gap: 1rem;
        }

        .profile-avatar {
          width: 100px;
          height: 100px;
        }
      }
    </style>
  </head>
  <body>
    <nav class="navbar">
      <a href="/">Home</a>
      {% if current_user.is_authenticated %}
      <a href="/user/{{ current_user.username }}">My Profile</a>
      <a href="/logout">Logout</a>
      {% else %}
      <a href="/login">Login</a>
      <a href="/register">Register</a>
      {% endif %}
    </nav>
    <div class="profile-container">
      <div class="profile-header">
        <img
          src="{{ user.avatar_url or '/static/default_avatar.png' }}"
          class="profile-avatar"
          alt="avatar"
        />
        <div class="profile-info">
          <h1>
            {{ user.username }}
            <span class="profile-rep">({{ user.reputation }} rep)</span>
          </h1>
          <p class="profile-bio">{{ user.bio or 'No bio yet.' }}</p>
          {% if current_user.is_authenticated and current_user.id == user.id %}
          <a href="/user/{{ user.username }}/edit" class="edit-profile-btn"
            >Edit Profile</a
          >
          {% endif %}
        </div>
      </div>
      <div class="profile-section">
        <h2>Questions</h2>
        {% if questions %}
        <ul class="profile-list">
          {% for q in questions %}
          <li>
            <a href="/question/{{ q.id }}">{{ q.title }}</a>
            <span class="profile-date"
              >({{ q.created_at.strftime('%b %d, %Y') }})</span
            >
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>No questions asked yet.</p>
        {% endif %}
      </div>
      <div class="profile-section">
        <h2>Answers</h2>
        {% if answers %}
        <ul class="profile-list">
          {% for a in answers %}
          <li>
            On
            <a href="/question/{{ a.question.id }}">{{ a.question.title }}</a>
            <span class="profile-date"
              >({{ a.created_at.strftime('%b %d, %Y') }})</span
            >
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>No answers posted yet.</p>
        {% endif %}
      </div>
      <div class="profile-section">
        <h2>Comments</h2>
        {% if comments %}
        <ul class="profile-list">
          {% for c in comments if not c.is_deleted %}
          <li>
            {{ c.content }}
            <span class="profile-date"
              >({{ c.created_at.strftime('%b %d, %Y') }})</span
            >
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>No comments yet.</p>
        {% endif %}
      </div>
    </div>
  </body>
</html>
